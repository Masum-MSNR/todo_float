import os
import pickle

class PositionManager:
    def __init__(self, widget):
        self.widget = widget

    def save_position(self):
        self.widget.root.update_idletasks()
        position = (self.widget.root.winfo_x(), self.widget.root.winfo_y(), self.widget.root.winfo_width(), self.widget.root.winfo_height())
        with open("window_position.pkl", "wb") as f:
            pickle.dump(position, f)

    def restore_position(self):
        if os.path.exists("window_position.pkl"):
            try:
                with open("window_position.pkl", "rb") as f:
                    position = pickle.load(f)
                    if position:
                        self.widget.root.geometry(f"+{position[0]}+{position[1]}")
                        return
            except (EOFError, pickle.UnpicklingError):
                pass
        self.widget.root.geometry(f"+0+0")
