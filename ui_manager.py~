import tkinter as tk
from tkinter import PhotoImage

class UIManager:
    def __init__(self, widget):
        self.widget = widget
        self.todo_frame = tk.Frame(self.widget.root, bg="black")
        self.todo_frame.pack(fill="both", expand=True)

    def update_todo_list(self):
        for widget in self.todo_frame.winfo_children():
            widget.destroy()

        for i, todo in enumerate(self.widget.todo_manager.todos):
            todo_frame = tk.Frame(self.todo_frame, bg="black")
            todo_frame.pack(fill="x", pady=2, anchor="w")

            if 'var' not in todo:
                todo['var'] = tk.IntVar(value=0)

            canvas = tk.Canvas(todo_frame, width=24, height=24, bg="red", bd=0, highlightthickness=0)
            canvas.pack(side="left", padx=5, anchor="w")

            if todo['checked']:
                canvas.config(bg="green")
            else:
                canvas.config(bg="red")

            canvas.bind("<Button-1>", lambda event, idx=i: self.widget.todo_manager.toggle_rectangle(idx))

            label = tk.Label(todo_frame, text=todo['task'], fg="white", bg="black", font=("Arial", 10), anchor="w")
            label.pack(side="left", fill="x", padx=10, anchor="w")

            label.update_idletasks()
            delete_icon = PhotoImage(file="delete_icon.png")
            delete_icon = delete_icon.subsample(12, 12)
            delete_label = tk.Label(todo_frame, image=delete_icon, bg="black", width=20, height=20)
            delete_label.photo = delete_icon
            delete_label.pack(side="right", padx=5)

            delete_label.bind("<Button-1>", lambda event, idx=i: self.widget.todo_manager.delete_todo(idx))

        self.todo_frame.update_idletasks()
        self.adjust_window_height()

    def adjust_window_height(self):
        todo_count = len(self.widget.todo_manager.todos)
        if todo_count == 0:
            estimated_height = 58
        else:
            estimated
